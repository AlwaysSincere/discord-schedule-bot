# .github/workflows/test-7days.yml
name: Test Schedule Extraction (7 Days Only)

# ìˆ˜ë™ ì‹¤í–‰ ì „ìš©
on:
  workflow_dispatch:

jobs:
  test-schedule-extraction:
    runs-on: ubuntu-latest
    
    steps:
    # 1ë‹¨ê³„: ì½”ë“œ ë‹¤ìš´ë¡œë“œ
    - name: ğŸ“¥ ì½”ë“œ ì²´í¬ì•„ì›ƒ
      uses: actions/checkout@v4
    
    # 2ë‹¨ê³„: Python ì„¤ì¹˜
    - name: ğŸ Python ì„¤ì •
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    # 3ë‹¨ê³„: íŒ¨í‚¤ì§€ ì„¤ì¹˜
    - name: ğŸ“¦ íŒ¨í‚¤ì§€ ì„¤ì¹˜
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    
    # 4ë‹¨ê³„: í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (7ì¼ë§Œ)
    - name: ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (7ì¼ ë°ì´í„°)
      env:
        DISCORD_TOKEN: ${{ secrets.DISCORD_TOKEN }}
        OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
        GOOGLE_CREDENTIALS: ${{ secrets.GOOGLE_CREDENTIALS }}
        CALENDAR_ID: ${{ secrets.CALENDAR_ID }}
        TEST_MODE: 'true'  # 7ì¼ë§Œ í…ŒìŠ¤íŠ¸
        DAYS_LIMIT: '7'    # 7ì¼ ì œí•œ
      run: |
        echo "ğŸ§ª 7ì¼ í…ŒìŠ¤íŠ¸ ëª¨ë“œ ì‹¤í–‰"
        echo "ğŸ’° ì˜ˆìƒ ë¹„ìš©: ì•½ 500-1000ì›"
        echo "â±ï¸ ì˜ˆìƒ ì‹œê°„: 3-5ë¶„"
        cd src
        python test_main.py
